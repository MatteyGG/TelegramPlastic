// faq.ts

import { MATERIALS } from "../lib/context";

type FAQItem = {
  keywords: string[];
  answer: string;
};

export const FAQ: FAQItem[] = [
  {
    keywords: ["–Ω–∞—á–∞—Ç—å", "–Ω–æ–≤–∏—á–æ–∫", "–Ω–∞—á–∏–Ω–∞—é—â–∏–º"],
    answer: `PLA - –∏–¥–µ–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è —Å—Ç–∞—Ä—Ç–∞! –õ–µ–≥–∫–æ –ø–µ—á–∞—Ç–∞–µ—Ç—Å—è, –Ω–µ—Ç–æ–∫—Å–∏—á–µ–Ω. –†–µ–∫–æ–º–µ–Ω–¥—É—é –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: 
–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–æ–ø–ª–∞: 200-220¬∞C üå°Ô∏è
–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã: 50-60¬∞C
–°–∫–æ—Ä–æ—Å—Ç—å: 50-60 –º–º/—Å
${MATERIALS?.PLA?.links?.[0] || ""}`,
  },
  {
    keywords: ["–ø—Ä–æ—á–Ω—ã–π", "–ø—Ä–æ—á–Ω–æ—Å—Ç—å", "–Ω–∞–≥—Ä—É–∑–∫–∏"],
    answer: `–î–ª—è –ø—Ä–æ—á–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ABS –∏–ª–∏ PETG üîß
ABS - —É–¥–∞—Ä–æ–ø—Ä–æ—á–Ω—ã–π, —Ç–µ—Ä–º–æ—Å—Ç–æ–π–∫–∏–π (–¥–æ 100¬∞C)
PETG - —Ö–∏–º–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–π, –≥–∏–±–∫–∏–π
${MATERIALS?.ABS?.links?.[0] || ""}
${MATERIALS?.PETG?.links?.[0] || ""}`,
  },
];

export const CACHE = new Map<string, string>();



export function findFAQAnswer(question: string): string | null {
  const lowerQ = question.toLowerCase();

  // –ü—Ä—è–º–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ –∫—ç—à–µ
  if (CACHE.has(lowerQ)) return CACHE.get(lowerQ)!;

  // –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
  for (const item of FAQ) {
    if (item.keywords.some((kw) => lowerQ.includes(kw))) {
      CACHE.set(lowerQ, item.answer);
      return item.answer;
    }
  }
  return null;
}
